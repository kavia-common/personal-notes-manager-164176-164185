{"is_source_file": true, "format": "JavaScript", "description": "This source file defines the function `askPerplexity`, which interfaces with the Perplexity AI API to perform web search/chat completions, handling API key retrieval, request construction, response parsing, and normalization of citations and reply text.", "external_files": ["fetch"], "external_methods": ["fetch"], "published": ["askPerplexity"], "classes": [], "methods": [{"name": "askPerplexity(prompt, { top_k = 5 } = {})", "description": "An asynchronous function that sends a prompt to Perplexity's chat API with optional top_k parameter, handles API key retrieval, sends the request, and processes the response to extract reply text and citations.", "scope": "", "scopeKind": ""}], "calls": ["process.env.REACT_APP_PERPLEXITY_API_KEY", "fetch"], "search-terms": ["Perplexity", "chat completion API", "web search", "citations", "REACT_APP_PERPLEXITY_API_KEY"], "state": 2, "file_id": 14, "knowledge_revision": 35, "git_revision": "", "ctags": [{"_type": "tag", "name": "askPerplexity", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-164176-164185/notes_frontend/src/components/Chatbot/PerplexityService.js", "pattern": "/^export async function askPerplexity(prompt, { top_k = 5 } = {}) {$/", "language": "JavaScript", "kind": "function", "signature": "(prompt, { top_k = 5 } = {})"}, {"_type": "tag", "name": "body", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-164176-164185/notes_frontend/src/components/Chatbot/PerplexityService.js", "pattern": "/^  const body = {$/", "language": "JavaScript", "kind": "class", "scope": "askPerplexity", "scopeKind": "class"}, {"_type": "tag", "name": "messages", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-164176-164185/notes_frontend/src/components/Chatbot/PerplexityService.js", "pattern": "/^    messages: [$/", "language": "JavaScript", "kind": "property", "scope": "askPerplexity.body", "scopeKind": "class"}, {"_type": "tag", "name": "model", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-164176-164185/notes_frontend/src/components/Chatbot/PerplexityService.js", "pattern": "/^    model: \"sonar\", \\/\\/ general web-enabled model$/", "language": "JavaScript", "kind": "property", "scope": "askPerplexity.body", "scopeKind": "class"}, {"_type": "tag", "name": "top_k", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-164176-164185/notes_frontend/src/components/Chatbot/PerplexityService.js", "pattern": "/^    top_k$/", "language": "JavaScript", "kind": "field", "scope": "askPerplexity.body", "scopeKind": "class"}], "hash": "ff906cf68574cee63544e722390a4f5a", "format-version": 4, "code-base-name": "notes_frontend", "filename": "notes_frontend/src/components/Chatbot/PerplexityService.js", "fields": [{"name": "messages: [", "scope": "askPerplexity.body", "scopeKind": "class", "description": "unavailable"}, {"name": "model: \"sonar\", \\/\\/ general web-enabled model", "scope": "askPerplexity.body", "scopeKind": "class", "description": "unavailable"}, {"name": "top_k", "scope": "askPerplexity.body", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"35": ""}]}